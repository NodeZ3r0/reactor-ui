# REACTOR UI - Quick Deployment Guide

## For NodeZ3r0: Rapid Production Deployment

### Step 1: Upload to DigitalOcean VPS

```bash
# On your local machine, upload the entire reactor-ui directory
scp -r reactor-ui nodez3r0@10.0.0.2:/opt/

# SSH to server
ssh nodez3r0@10.0.0.2
```

### Step 2: Build and Deploy (Choose One Method)

#### Option A: Docker (Recommended)

```bash
cd /opt/reactor-ui

# Build the container
docker build -t reactor-ui:latest .

# Run it (connects to existing spec_kit network)
docker run -d \
  --name reactor_ui \
  --network wopr_ollama_chat_spec_kit_net \
  --restart unless-stopped \
  -p 5173:80 \
  reactor-ui:latest

# Verify it's running
docker ps | grep reactor_ui
docker logs reactor_ui

# Test
curl http://localhost:5173/health
```

#### Option B: Docker Compose Integration

```bash
cd /opt/wopr_ollama_chat

# Add reactor-ui service to your existing docker-compose.yml
# (See docker-compose.yml in reactor-ui directory for the service definition)

# Start it
docker-compose up -d reactor-ui

# Verify
docker-compose ps
docker-compose logs reactor-ui
```

#### Option C: Development Mode (For Testing)

```bash
cd /opt/reactor-ui

# Install dependencies
npm install

# Create .env file
echo "VITE_API_BASE_URL=http://10.0.0.3:3003" > .env

# Start dev server
npm run dev

# Access at http://10.0.0.2:5173
```

### Step 3: Configure Caddy

Add to `/etc/caddy/Caddyfile`:

```caddy
reactor.wopr.systems {
    # Reverse proxy to React UI
    reverse_proxy localhost:5173
    
    # Optional: Add Authentik SSO
    # forward_auth authentik.wopr.systems {
    #     uri /outpost.goauthentik.io/auth/caddy
    # }
}
```

Reload Caddy:

```bash
sudo caddy reload --config /etc/caddy/Caddyfile
```

### Step 4: Verify Everything Works

```bash
# Test health
curl http://localhost:5173/health

# Test API connectivity from container
docker exec reactor_ui curl http://spec_kit:3003/health

# Check logs
docker logs -f reactor_ui
```

### Step 5: Access the UI

Open browser: `https://reactor.wopr.systems`

You should see:
- ✅ WOPR / REACTOR logo with CRT phosphor green theme
- ✅ 5 tabs: Projects, Pipeline & Editor, RAG/MCP, Servers, Account
- ✅ System health indicator in top right
- ✅ AI models listed in sidebar

## Troubleshooting

### Container won't start

```bash
# Check if port 5173 is available
sudo netstat -tlnp | grep 5173

# Check Docker logs
docker logs reactor_ui

# Rebuild if needed
docker rm -f reactor_ui
docker build --no-cache -t reactor-ui:latest /opt/reactor-ui
docker run -d --name reactor_ui --network wopr_ollama_chat_spec_kit_net -p 5173:80 reactor-ui:latest
```

### API calls fail

```bash
# Verify Spec Kit is running
docker ps | grep spec_kit

# Test connectivity from UI container
docker exec reactor_ui curl http://spec_kit:3003/health

# Check network
docker network inspect wopr_ollama_chat_spec_kit_net | grep -A5 reactor_ui
```

### UI loads but shows errors

```bash
# Check browser console (F12)
# Common issues:
# - CORS: Verify API is accessible
# - Network: Check Nebula mesh connectivity
# - Environment: Verify VITE_API_BASE_URL is correct
```

## What to Expect

Once deployed, you'll have:

1. **Full UI at ai.wopr.systems** with all 5 views
2. **Monaco code editor** for viewing generated code
3. **RAG document upload** - drag & drop PDFs/docs
4. **Pipeline execution** - click "Run Pipeline" to generate code
5. **Real-time logs** - watch the AI work
6. **Forgejo integration** - direct links to created repos

## Next Steps After Deployment

1. Upload some docs to RAG (specs, documentation, code samples)
2. Run a test pipeline (e.g., "simple calculator")
3. Check Forgejo for the generated repo
4. Review the code in Monaco editor
5. Test RAG queries on your uploaded docs

## Production Checklist

- [ ] Container running: `docker ps | grep reactor_ui`
- [ ] Health check passing: `curl http://localhost:5173/health`
- [ ] API connectivity working: `docker exec reactor_ui curl http://spec_kit:3003/health`
- [ ] Caddy configured and reloaded
- [ ] HTTPS working: `curl -I https://reactor.wopr.systems`
- [ ] UI loads in browser
- [ ] Can run a test pipeline
- [ ] Can upload a test document
- [ ] Can query RAG

---

**Ready to deploy? Start with Step 1 above.**

Questions? Check README.md for detailed documentation.
